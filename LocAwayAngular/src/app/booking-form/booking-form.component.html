<div class="container">
  <div class="row mt-3">
    <h1>Réservation</h1>
    <div>
      <a class="btn btn-info ml-3 mt-2" [routerLink]="['/accomodation-detail', accomodation_id]" routerLinkActive="active">Retour vers l'annonce</a>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col">
      <div class="row">

        <ngb-datepicker #dp *ngIf="asyncDataLoaded" (select)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t"  [markDisabled]="isDisabled" outsideDays="hidden">
        </ngb-datepicker>

        <ng-template #t let-date let-focused="focused" let-disabled="disabled">
          <span class="custom-day"
                [class.text-muted]="disabled"
                [class.booked]="disabled"
                [class.focused]="focused"
                [class.range]="isRange(date)"
                [class.faded]="isHovered(date) || isInside(date)"
                (mouseenter)="hoveredDate = date"
                (mouseleave)="hoveredDate = null">
            {{ date.day }}
          </span>
        </ng-template>
      </div>
      <div class="row">
        <div *ngIf="!validateBookingDates()" class="alert alert-danger" role="alert">
          Veuillez sélectionner uniquement des jours disponibles
        </div>
      </div>

      <div class="row mt-3">
        <div class="form-group">
          <label for="nbOfPersons">Nombre de personnes: </label>
          <input id="nbOfPersons" class="form-control" type="number" min="1" [max]="accomodation?.maxPersons" [(ngModel)]="numberOfPersons"/>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="row mt-3">
        <h3>Détail</h3>
      </div>
      <div class="row mt-3">
        <p>Réservation du {{ngbDateToDate(fromDate) | date}} <span *ngIf="toDate">au {{ngbDateToDate(toDate) | date}}</span></p>
      </div>
      <div class="row mt-3">
        <p>Prix total: {{totalBookingPrice() | currency:'EUR'}}</p>
      </div>
      <div class="row mt-3">
        <button [disabled]="!validateBookingDates()" class="btn btn-primary ml-3" (click)="saveBooking()">Valider la réservation</button>
      </div>
    </div>
  </div>
</div>
